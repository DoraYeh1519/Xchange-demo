<!DOCTYPE html>
<html lang="en">
  <head>
    <title>XChange Home</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    
    <link href="https://fonts.googleapis.com/css?family=Poppins:300,400,500,600,700" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Lora:400,400i,700,700i&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Abril+Fatface&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="static/css/open-iconic-bootstrap.min.css">
    <link rel="stylesheet" href="static/css/animate.css">

    <link rel="stylesheet" href="static/css/owl.carousel.min.css">
    <link rel="stylesheet" href="static/css/owl.theme.default.min.css">
    <link rel="stylesheet" href="static/css/magnific-popup.css">

    <link rel="stylesheet" href="static/css/aos.css">

    <link rel="stylesheet" href="static/css/ionicons.min.css">

    <link rel="stylesheet" href="static/css/bootstrap-datepicker.css">
    <link rel="stylesheet" href="static/css/jquery.timepicker.css">

    <link rel="stylesheet" href="static/css/flaticon.css">
    <link rel="stylesheet" href="static/css/icomoon.css">
    <link rel="stylesheet" href="static/css/style.css">
  </head>
  <body>

    {% include "navbar.html" %}

    <div id="colorlib-main">
      <div class="container px-0">
        <div class="row no-gutters">
          {% for post in all_posts %}
            {% if post.blogpost_id % 4 == 1 or post.blogpost_id % 4 == 0 %}
              <div class="col-md-6">
                <div class="blog-entry ftco-animate d-md-flex align-items-center">
                  <img src="{{ post.img_url }}" alt="Thumbnail Image" class="img img-2 popup-vimeo d-flex align-items-center justify-content-center" style="object-fit: cover;">
                  <div class="text text-2 p-4">
                    <h3 class="mb-2"><a href="{{ url_for('show_post', post_id=post.blogpost_id) }}">{{post.title}}</a></h3>
                    <div class="meta-wrap">
                      <p class="meta">
                        <span><i class="icon-calendar mr-2"></i>{{post.upload_date}}</span>
                        <span><a href="{{ url_for('profile', user_id=post.author_id) }}"><i class="icon-folder-o mr-2"></i>By {{post.author.user_name}}</a></span>
                        <span><i class="icon-comment2 mr-2"></i>{{post.views}} Views</span>
                        <span><i class="icon-heart mr-2"></i>{{post.likes}} Likes</span>
                      </p>
                      <p><a href="{{ url_for('show_post', post_id=post.blogpost_id) }}" class="btn-custom">Read More <span class="ion-ios-arrow-forward"></span></a></p>
                    </div>
                  </div>
                </div>
              </div>
            {% else %}
              <div class="col-md-6">
                <div class="blog-entry ftco-animate d-md-flex align-items-center">
                  <div class="text text-2 p-4">
                    <h3 class="mb-2"><a href="{{ url_for('show_post', post_id=post.blogpost_id) }}">{{post.title}}</a></h3>
                    <div class="meta-wrap">
                      <p class="meta">
                        <span><i class="icon-calendar mr-2"></i>{{post.upload_date}}</span>
                        <span><a href="{{ url_for('profile', user_id=post.author_id) }}"><i class="icon-folder-o mr-2"></i>By {{post.author.user_name}}</a></span>
                        <span><i class="icon-comment2 mr-2"></i>{{post.views}} Views</span>
                        <span><i class="icon-heart mr-2"></i>{{post.likes}} Likes</span>
                      </p>
                    </div>
                    <p><a href="{{ url_for('show_post', post_id=post.blogpost_id) }}" class="btn-custom">Read More <span class="ion-ios-arrow-forward"></span></a></p>
                  </div>
                  <img src="{{ post.img_url }}" alt="Thumbnail Image" class="img img-2 popup-vimeo d-flex align-items-center justify-content-center" style="object-fit: cover;">
                </div>
              </div>
            {% endif %}
          {% endfor %}
        </div>
      </div>
    </div><!-- END COLORLIB-MAIN -->
  </div><!-- END COLORLIB-PAGE -->

  <!-- loader -->
  <div id="ftco-loader" class="show fullscreen">
    <svg class="circular" width="48px" height="48px">
      <circle class="path-bg" cx="24" cy="24" r="22" fill="none" stroke-width="4" stroke="#eeeeee"/>
      <circle class="path" cx="24" cy="24" r="22" fill="none" stroke-width="4" stroke-miterlimit="10" stroke="#F96D00"/>
    </svg>
  </div>

  <!-- Flash Message Modal -->
  <div class="modal fade" id="flashModal" tabindex="-1" aria-labelledby="flashModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="flashModalLabel">Notification</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body" id="modalBodyContent"></div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
  </div>

  <script src="static/js/jquery.min.js"></script>
  <script src="static/js/jquery-migrate-3.0.1.min.js"></script>
  <script src="static/js/popper.min.js"></script>
  <script src="static/js/bootstrap.min.js"></script>
  <script src="static/js/jquery.easing.1.3.js"></script>
  <script src="static/js/jquery.waypoints.min.js"></script>
  <script src="static/js/jquery.stellar.min.js"></script>
  <script src="static/js/owl.carousel.min.js"></script>
  <script src="static/js/jquery.magnific-popup.min.js"></script>
  <script src="static/js/aos.js"></script>
  <script src="static/js/jquery.animateNumber.min.js"></script>
  <script src="static/js/bootstrap-datepicker.js"></script>
  <script src="static/js/jquery.timepicker.min.js"></script>
  <script src="static/js/scrollax.min.js"></script>
  <script src="static/js/google-map.js"></script>
  <script src="static/js/main.js"></script>

  <script>
    // Automatically show flash messages in a modal
    document.addEventListener('DOMContentLoaded', function () {
      const flashMessages = JSON.parse('{{ get_flashed_messages()|tojson }}');
      if (flashMessages.length > 0) {
        const modalBodyContent = document.getElementById('modalBodyContent');
        modalBodyContent.innerHTML = '';
        flashMessages.forEach(message => {
          const p = document.createElement('p');
          p.textContent = message;
          modalBodyContent.appendChild(p);
        });
        const flashModal = new bootstrap.Modal(document.getElementById('flashModal'));
        flashModal.show();
      }
    });
  </script>
  </body>
</html>